<!DOCTYPE html><html><head><title>type checker —— 不可不知的typescript类型</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><link rel="shortcut icon" type="image/x-icon" href="/image/logo.jpg"><link rel="stylesheet" href="/css/index.css"><meta name="keywords" content="typescript,"><meta name="description" content=""><script src="/js/jquery.min.js"></script><script src="/js/index.js"></script><script src="/js/fancybox.umd.js"></script><script src="/js/fancybox-images.js"></script><script src="/js/gitalk.min.js"></script><script src="/js/hljs.min.js"></script><script>hljs.highlightAll()</script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="header"><div class="header-top" id="header-top"><div class="h-left"><a href="/"><img src="/image/loading.gif" data-original="/image/header.png" alt="Quiet"></a></div><div class="h-right"><ul><li><a href="/">HOME</a><span class="dot"></span></li><li><a href="/archives">ARCHIVE</a><span class="dot"></span></li><li><a href="/tags">TAGS</a><span class="dot"></span></li><li><a href="/about">ABOUT ME</a><span class="dot"></span></li></ul></div><div class="h-right-close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgba(68,68,68,1)"/></svg></div></div></div><div class="sidebar"><div class="topo"><h2>Jesslyn wongkayan</h2></div><ul><li><a href="/">HOME</a></li><li><a href="/archives">ARCHIVE</a></li><li><a href="/tags">TAGS</a></li><li><a href="/about">ABOUT ME</a></li></ul><div class="my_foot"><a target="_blank" rel="noopener" href="https://github.com/Jesslynwong"><img src="/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/duogongneng/MyBlogImg/imggithub.png" alt="Quiet主题"></a></div></div><div class="shelter"></div><style>.shelter{background-color:#333;opacity:.5;cursor:pointer;display:none;position:fixed;left:0;top:0;right:0;bottom:0;z-index:1998}.sidebar{width:66%;height:100%;position:fixed;top:0;right:-100%;bottom:0;background:#fff;z-index:1999;text-align:center;box-shadow:-6px 0 20px rgba(98,94,94,.815)}.topo{width:100%;height:200px;background:url(https://api.ixiaowai.cn/gqapi/gqapi.php) no-repeat;background-size:100% 100%;position:relative;display:flex;align-items:flex-end}.topo h2{color:#fff;z-index:1;position:relative;margin:0 0 10px 10px;font-size:1.2em;box-sizing:border-box}.topo:before{content:'';background-image:url(/image/pattern.png);background-repeat:repeat;height:100%;left:0;position:absolute;top:0;width:100%;z-index:1}.sidebar ul{width:100%;margin-top:50px}.sidebar ul li{height:50px;list-style:none;font-size:1.2em;text-align:right;margin-right:10px}.sidebar ul li a{display:grid;color:#5d606a;text-overflow:ellipsis;width:100%;text-decoration:none}.my_foot{width:100%;padding:10px;margin-bottom:10px;position:absolute;bottom:0}.my_foot a{text-decoration:none;margin-right:10px;display:inline-block}.my_foot a img{width:30px;height:30px}</style><script>$(function(){$(".h-right-close>svg").click(function(){$(".sidebar").animate({right:"0"},500),$(".shelter").fadeIn("slow")}),$(".shelter").click(function(e){$(".sidebar").animate({right:"-100%"},500),$(".shelter").fadeOut("slow")})})</script><div class="post"><div class="post-header-background post-header-img" style="background:url(https://api.ixiaowai.cn/gqapi/gqapi.php)"><div class="post-header-background-content"><ul class="post-header-tag"><li><a href="/tags/typescript">typescript</a></li></ul><h1>type checker —— 不可不知的typescript类型</h1><div class="post-header-info"><div class="post-header-info-author"><svg t="1604839279282" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2901" width="20" height="20"><path d="M513 956.3c-247.7 0-448-200.3-448-448S265.3 66.2 513 66.2s448 200.3 448 448-200.3 442.1-448 442.1zm0-830.9c-212.2 0-388.8 170.7-388.8 388.8C124.2 726.3 294.9 903 513 903c212.2 0 388.8-170.7 388.8-388.8S725.2 125.4 513 125.4zm0 430.2c-94.2 0-170.7-76.5-170.7-170.7S418.8 207.8 513 207.8s170.7 76.5 170.7 170.7S607.2 555.6 513 555.6zm0-289.1c-64.6 0-112 52.8-112 112s47.4 117.9 112 117.9 112-52.8 112-112-47.4-117.9-112-117.9zm0 689.8c-135.7 0-259-58.7-341.9-158.9l-11.8-17.8 11.8-17.8c76.5-117.9 206.2-188.5 347.8-188.5 135.7 0 265 64.6 341.9 182.6l11.8 17.8-11.8 17.8C778 897.1 648.7 956.3 513 956.3zM230.3 773.2C300.9 849.7 406.9 897 513 897c112 0 218.1-47.4 288.6-129.8-70.5-88.2-170.7-135.6-282.7-135.6s-218.1 53.3-288.6 141.6z" p-id="2902" fill="#ffffff"></path></svg> <span class="post-header-info-author-text"><a target="_blank" rel="noopener" href="https://jesslynwong.github.io/about">Jesslyn</a></span><div class="post-header-info-author-categories"></div><p>2022-11-27 23:07:00</p></div></div></div></div><div class="post-content" id="content"><div id="article" class="post-content-info"><p>typescript是一个type checker。主要用来弥补javascript这种动态语言带来的不便。动态语言（弱类型）的变量类型是运行时被赋值后才有某种类型。这样一来，当项目越来越大的时候，当类型出现错误的时候，在编译时就能够确定对象的类型，显得尤为重要，因此就出现了typescript。</p><h2 id="ts-es5-es6-关系"><a href="#ts-es5-es6-关系" class="headerlink" title="ts, es5, es6 关系"></a>ts, es5, es6 关系</h2><p>一般来说浏览器和node是识别不了TS的，因此在日常开发过程中，TS会通过类型擦除等转化，如webpack的ts-loader等把TS转化成浏览器和node可识别的JS运行。</p><p>TS主要通过TS类型擦除城es6可以运行在node或者浏览器特定版本以上，如果出现不兼容es6的情况，可以转译成es5，再打包成单文件，到浏览器中运行。</p><h2 id="数据类型-datatype"><a href="#数据类型-datatype" class="headerlink" title="数据类型 datatype"></a>数据类型 datatype</h2><p>学习TS主要得把类型看成集合的概念，这样很多东西都可以理解了，比如泛型中有特定的数字等。</p><p>JS类型：string, number, boolean, null, undefined, bigint, symbol, object</p><p>TS在JS的基础上增加了: void, never, any, enum, unknown, 自定义类型：type, interface</p><h3 id="基础类型"><a href="#基础类型" class="headerlink" title="基础类型"></a>基础类型</h3><p>对于基础类型，我们一般直接通过小写或者大写类型来进行定义，举个🌰</p><pre><code class="typescript">const num:number = 1
const num:Number = 1
</code></pre><p>探讨一下两者有什么区别呢？number是基础类型，Number是包装对象。当定义为number的时候，在内存中给开辟的是一段栈空间存储number值。定义为Number开辟的是堆内存，在内存中不仅仅只有数值本身，还具有Number方法，比如toFixed等。因此对于普通对象，我们一般不写包装类型对象。</p><p>那既然number没有方法，那为什么定义为number的时候还能使用方法呢？主要是因为number这类基础类型会进行包装类型的转化。举个🌰</p><pre><code class="js">let num = 1.23435
let afterTransfer = num.toFixed(2) // 1.23
// 实际上进行了以下转化
let temp = Number(num)
let value = temp.toFixed(2)
delete temp
return value
</code></pre><h3 id="对象类型"><a href="#对象类型" class="headerlink" title="对象类型"></a>对象类型</h3><p>Number, String, Object等属于对象object，那么在定义的时候写成object，<code>num:object = 1</code> 和<code>num:object = &#39;hhh&#39;</code>都不会报错。但这失去了我们对TS类型检查的期待。所以，定义对象类型的时，不要写成object</p><p>由于包装类型的问题，object太不精确，所以一般使用<code>索引签名</code>或者<code>Record泛型</code> 来描述普通对象。</p><pre><code class="ts">// 索引签名
type A = &#123;
  [k: string]: number
&#125;
// Record泛型，（Record可以实现定义一个对象的 key 和 value 类型）
type A = Record&lt;string, number&gt;
// 若具体一点的
type A = &#123;
  name: string,
  age: number
&#125;

const a:A = &#123;
    name: string,
  age: &#39;23&#39; // 这里用字符串也OK，数字会toString隐式转化
&#125;
</code></pre><h3 id="数组对象"><a href="#数组对象" class="headerlink" title="数组对象"></a>数组对象</h3><p>由于直接写类型中直接写Array并没有说清楚具体数组里面类型，不精确，因此以下三种方式描述数组</p><pre><code class="ts">// 1. Array&lt;?&gt;
type A = Array&lt;string&gt;
const a:A = [&#39;w&#39;,&#39;y&#39;,&#39;q&#39;,&#39;d&#39;,&#39;c&#39;]
// 2. string[]
type B = string[]
const b:B = [&#39;w&#39;,&#39;y&#39;,&#39;q&#39;,&#39;d&#39;,&#39;c&#39;]
const b:string[] = [&#39;w&#39;,&#39;y&#39;,&#39;q&#39;,&#39;d&#39;,&#39;c&#39;]
// 3. [string, number]
type C = [string, number]
const c:C = [&#39;y&#39;, 5]
</code></pre><h3 id="函数对象"><a href="#函数对象" class="headerlink" title="函数对象"></a>函数对象</h3><p>类型中直接写成Function，不会出现报错</p><pre><code class="ts">var add: Function = () =&gt; &#123;
  console.log(11111)
&#125;
</code></pre><p>但是对于输出结果来说，并不能知道其类型。因此一般使用<code>()=&gt;xxx</code>来表示其类型</p><pre><code class="ts">// 使用类型写法
type FnType = () =&gt; void
const fn:FnType = () =&gt; &#123; console.log(11111) &#125; // 箭头函数
function fn:FnType() &#123;	// 普通函数
  console.log(11111)
&#125;
// 使用声明写法
var add = (a:number, b:number):number =&gt; &#123;	// 箭头函数
    return a + b 
&#125;
function add(a:number, b:number):number &#123;
  return a + b
&#125;
// type中有this写法，由于this作用域的问题，实例避免写箭头函数
type FnWithThis = (this:Someone, name:string) =&gt; void
const say:FnWithThis = function() &#123;
  console.log(&#39;hi&#39; + this.name)
&#125;
const X:Person = &#123;
  name:&#39;jesslyn&#39;,
  age:18
&#125;
X.say(&#39;hhhh&#39;)
say.call(X, &#39;hhhh&#39;)

// ⚠️ type中定义返回为null，实例中可以为undefined，反之亦然，不会报错
type FnType = () =&gt; undefined
const fn:FnType = () =&gt; &#123;
  return null
&#125;
</code></pre><h3 id="any-和-unknown"><a href="#any-和-unknown" class="headerlink" title="any 和 unknown"></a>any 和 unknown</h3><p>any和unknown主要的区别在于unknown有断言的机会，但是any没有断言的机会，基本用了any之后，类型都能被检测通过。</p><h3 id="never"><a href="#never" class="headerlink" title="never"></a>never</h3><p>never主要是用来判断而不是用来声明的，有never基本可以判断用户错了。举个🌰</p><pre><code class="ts">type a = string &amp;&amp; number // string交number = 空集 -&gt; never
</code></pre><h3 id="enum枚举类型"><a href="#enum枚举类型" class="headerlink" title="enum枚举类型"></a>enum枚举类型</h3><p>enum类型应用场景比较少，一般来说，number enum应用比较多，string和其他类型enum可以通过泛型来定义，用enum反而多此一举</p><pre><code class="ts">// 1. 通过标识辨别当前状态
enum A &#123;
  todo = 0,
  done,
  archived,
  deleted
&#125;
let status = 0
status = A.todo // 0
statu = A.done // 1

// 2. 权限控制
enum Permission &#123;
  None = 0,
  Read = 1 &lt;&lt; 0, // 0001
  Write = 1 &lt;&lt; 1, // 0010
  Delete = 1 &lt;&lt; 2, // 0100
  Manage = Read | Write | Delete
&#125;

type User = &#123;
  permission: Permission
&#125;
const user: User = &#123;
  permission:000101
&#125;
// 通过做与运算，只有当1&amp;1=1，才知道是否有权限
if ((user.permission &amp; Permission.Write) === Permission.Write) &#123;
  console.log(&#39;拥有写权限&#39;)
&#125;
if((user.permission &amp; Permission.Manage) === Permission.Manage) &#123;
  console.log(&#39;拥有管理权限&#39;)
&#125;
</code></pre></div><div id="gitalk-container"></div></div><script>Fancybox.bind('[data-fancybox="fancybox-gallery-img"]', {
  dragToClose: true,
  Toolbar: true,
  closeButton: "top",
  Image: {
    zoom: true,
  },
  on: {
    initCarousel: (fancybox) => {
      const slide = fancybox.Carousel.slides[fancybox.Carousel.page];
      fancybox.$container.style.setProperty(
        "--bg-image",
        `url("${slide.$thumb.src}")`
      );
    },
    "Carousel.change": (fancybox, carousel, to, from) => {
      const slide = carousel.slides[to];
      fancybox.$container.style.setProperty(
        "--bg-image",
        `url("${slide.$thumb.src}")`
      );
    },
  },
});</script><style>#noneimg img{display:none;z-index:9999;min-width:0;max-width:90%;max-height:80%;border-radius:0;position:fixed;box-shadow:0 0 0 #c3c3c300!important;left:0;top:0;right:0;bottom:0;margin:auto!important}@media screen and (max-width:600px){#noneimg img{max-width:88%}}</style><div class="post-paging"><a href="/2022/11/24/vueBeginner/"><div class="post-paging-next"><span>下一篇</span><p>零基础挑战一天学习VUE</p></div></a></div></div><div class="footer"><div class="Copyright">©2022 By Jesslyn wongkayan.</div><div class="contact"><a target="_blank" rel="noopener" href="https://github.com/Jesslynwong"><img src="/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/duogongneng/MyBlogImg/imggithub.png" alt="Quiet主题"></a></div></div><script src="/js/gotop.js"></script><style>@media screen and (min-width:600px){.goTop>span{display:flex;align-items:center;justify-content:center;border-radius:10px;width:40px;height:40px;cursor:pointer;opacity:.8;background:rgba(18,24,58,.06);text-align:center;transition:border .5s;border:1px solid rgba(18,24,58,.06);-moz-transition:border .5s;-webkit-transition:border .5s;-o-transition:border .5s}.goTop>span:hover{border:1px solid #6680b3}.goTop{position:fixed;right:30px;bottom:80px}.goTop>span>svg{width:20px;height:20px;opacity:.7}}@media screen and (max-width:600px){.goTop{display:none}}</style><div class="goTop" id="js-go_top"><span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g><path d="M13 12v8h-2v-8H4l8-8 8 8z"></path></g></svg></span></div><script>$("#js-go_top").gotoTop({offset:500,speed:300,animationShow:{transform:"translate(0,0)",transition:"transform .5s ease-in-out"},animationHide:{transform:"translate(100px,0)",transition:"transform .5s ease-in-out"}})</script><script defer>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?4b5fe1472f22fadsfs";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>const data = '{"clientID":"8c7e2048c78b8bc2a849","clientSecret":"011c69973020c48e4bc0f897b4f7d54f04ea84a5","repo":"jesslynwong.github.io","owner":"Jesslynwong","admin":"Jesslynwong"}'
        const gitalk = new Gitalk({
            ...JSON.parse( data),
            id:location.pathname,
            distractionFreeMode:false
        })
        
        if(Boolean('true')){
            gitalk.render('gitalk-container')
        }</script><script>console.log("\n %c Hexo-Quiet 主题 %c https://github.com/79e/hexo-theme-quiet \n","color: #fadfa3; background: #030307; padding:5px 0;","background: #fadfa3; padding:5px 0;")</script><script>!function(e){var c=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){for(var t,r=0;r<c.length;r++)0<=(t=(t=c[r]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=c[r];t=o,n=function(){c=c.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n()},e.src=i}()}i(),e.addEventListener("scroll",function(){var t,n;t=i,n=e,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)})}(this)</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script></body></html>